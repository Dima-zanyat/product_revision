# Generated by Django 5.1.1 on 2026-02-02 15:59

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('products', '__first__'),
        ('sales', '__first__'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Revision',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('revision_date', models.DateField(help_text='–î–∞—Ç–∞, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è —Ä–µ–≤–∏–∑–∏—è', verbose_name='–î–∞—Ç–∞ —Ä–µ–≤–∏–∑–∏–∏')),
                ('status', models.CharField(choices=[('draft', '–ß–µ—Ä–Ω–æ–≤–∏–∫'), ('submitted', '–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É'), ('processing', '–í –æ–±—Ä–∞–±–æ—Ç–∫–µ'), ('completed', '–ó–∞–≤–µ—Ä—à–µ–Ω–∞')], default='draft', max_length=20, verbose_name='–°—Ç–∞—Ç—É—Å —Ä–µ–≤–∏–∑–∏–∏')),
                ('comments', models.TextField(blank=True, verbose_name='–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è')),
                ('author', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='revisions', to=settings.AUTH_USER_MODEL, verbose_name='–ê–≤—Ç–æ—Ä —Ä–µ–≤–∏–∑–∏–∏ (—Å–æ—Ç—Ä—É–¥–Ω–∏–∫)')),
                ('location', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='revisions', to='sales.location', verbose_name='–¢–æ—á–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞')),
            ],
            options={
                'verbose_name': '–†–µ–≤–∏–∑–∏—è',
                'verbose_name_plural': '–†–µ–≤–∏–∑–∏–∏',
                'ordering': ['-revision_date', 'location'],
            },
        ),
        migrations.CreateModel(
            name='RevisionIngredientItem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('actual_quantity', models.DecimalField(decimal_places=3, max_digits=10, verbose_name='–§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ')),
                ('comments', models.TextField(blank=True, null=True, verbose_name='–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è')),
                ('ingredient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='products.ingredient', verbose_name='–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç')),
                ('revision', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ingredient_items', to='revisions.revision', verbose_name='–†–µ–≤–∏–∑–∏—è')),
            ],
            options={
                'verbose_name': '–û—Å—Ç–∞—Ç–æ–∫ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞',
                'verbose_name_plural': '–û—Å—Ç–∞—Ç–∫–∏ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤',
            },
        ),
        migrations.CreateModel(
            name='RevisionProductItem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('actual_quantity', models.PositiveIntegerField(help_text='–ò–∑ –∫–æ–ª–æ–Ω–∫–∏ "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ" –≤ Excel', verbose_name='–§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (—à—Ç—É–∫)')),
                ('comments', models.TextField(blank=True, null=True, verbose_name='–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='products.product', verbose_name='–ü—Ä–æ–¥—É–∫—Ç (–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞)')),
                ('revision', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='product_items', to='revisions.revision', verbose_name='–†–µ–≤–∏–∑–∏—è')),
            ],
            options={
                'verbose_name': '–û—Å—Ç–∞—Ç–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–∞',
                'verbose_name_plural': '–û—Å—Ç–∞—Ç–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤',
            },
        ),
        migrations.CreateModel(
            name='RevisionReport',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('expected_quantity', models.DecimalField(decimal_places=3, help_text='–ù–∞—á–∞–ª—å–Ω—ã–π - —Ä–∞—Å—Ö–æ–¥_–Ω–∞_–ø—Ä–æ–¥—É–∫—Ü–∏—é + –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è', max_digits=10, verbose_name='–†–∞—Å—á–µ—Ç–Ω—ã–π –æ—Å—Ç–∞—Ç–æ–∫')),
                ('actual_quantity', models.DecimalField(decimal_places=3, help_text='–ü—Ä–∏—Å–ª–∞–ª–∏ –∏–∑ —Ä–µ–≤–∏–∑–∏–∏ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤', max_digits=10, verbose_name='–§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –æ—Å—Ç–∞—Ç–æ–∫')),
                ('difference', models.DecimalField(decimal_places=3, help_text='–û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ = –Ω–µ–¥–æ—Å—Ç–∞—á–∞', max_digits=10, verbose_name='–†–∞–∑–Ω–∏—Ü–∞ (—Ñ–∞–∫—Ç - –æ–∂–∏–¥–∞–µ–º—ã–π)')),
                ('percentage', models.DecimalField(decimal_places=2, max_digits=5, verbose_name='% –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è')),
                ('status', models.CharField(choices=[('ok', '‚úÖ –ù–æ—Ä–º–∞ (0-3%)'), ('warning', '‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ (3-10%)'), ('critical', 'üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ (>10%)')], max_length=20, verbose_name='–°—Ç–∞—Ç—É—Å –ø—Ä–æ–±–ª–µ–º—ã')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è')),
                ('ingredient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='products.ingredient', verbose_name='–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç')),
                ('revision', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reports', to='revisions.revision', verbose_name='–†–µ–≤–∏–∑–∏—è')),
            ],
            options={
                'verbose_name': '–û—Ç—á–µ—Ç –ø–æ —Ä–µ–≤–∏–∑–∏–∏',
                'verbose_name_plural': '–û—Ç—á–µ—Ç—ã –ø–æ —Ä–µ–≤–∏–∑–∏—è–º',
                'ordering': ['-revision__revision_date'],
            },
        ),
        migrations.AddIndex(
            model_name='revision',
            index=models.Index(fields=['location', 'revision_date'], name='revisions_r_locatio_759a13_idx'),
        ),
        migrations.AddIndex(
            model_name='revision',
            index=models.Index(fields=['status'], name='revisions_r_status_7b1450_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='revision',
            unique_together={('location', 'revision_date')},
        ),
        migrations.AlterUniqueTogether(
            name='revisioningredientitem',
            unique_together={('revision', 'ingredient')},
        ),
        migrations.AlterUniqueTogether(
            name='revisionproductitem',
            unique_together={('revision', 'product')},
        ),
        migrations.AlterUniqueTogether(
            name='revisionreport',
            unique_together={('revision', 'ingredient')},
        ),
    ]
